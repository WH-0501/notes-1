<!-- TOC -->

- [字符串格式化](#字符串格式化)
    - [旧式格式化](#旧式格式化)
    - [格式化实例](#格式化实例)
    - [使用{}和format的新格式化](#使用和format的新格式化)
    - [format格式化实例](#format格式化实例)
    - [显示颜色](#显示颜色)

<!-- /TOC -->

# 字符串格式化

> This PEP proposes a new system for built-in string formatting operations, intended as a replacement for the existing ‘%’ string formatting operator.

python目前提供的字符串格式化方法有两种:

1. 百分号方式
2. format方式

这两种方式在`python2`和`python3`中都适用,百分号方式是python一直内置存在的,`format`方式为近期才出的.

## 旧式格式化

    参数格式: %[(name)][flags][width].[precision]typecode

**[(name)]**

可选,用于选择指定key

**[flags]**

可选,可供选择的值:

 值 | 说明
 ---|---
 + | 右对齐;正数前加正号,负数前加负号
 - | 左对齐;正数前无符号,负数前加负号
 space | 右对齐;正数前加空格,负数前加负号
 0 | 右对齐;正数前无符号,负数前加负号;用0填充空白处

**[width]**

可选,占有宽度

**.[precision]**

可选,小数点后保留的位数

**typecode**

必选,参数如下:

 值 | 说明
 ---|---
 s | 获取传入对象的__str__方法的返回值,并将其格式化到指定位置
 r | 获取传入对象的__repr__方法的返回值,并将其格式化到指定位置
 c | 整数: 将数字转换成其Unicode对应的值,10进制范围为0<=i<=1114111(py27则只支持0-255);字符: 将字符添加到指定位置
 o | 将整数转换成八进制表示,并将其格式化到指定位置
 x | 将整数转换成十六进制表示,并将其格式化到指定位置
 d | 将整数,浮点数转换成十进制表示,并将其格式化到指定位置
 e | 将整数,浮点数转换成科学计算法,并将其格式化到指定位置(小写e)
 E | 将整数,浮点数转换成科学计数法,并将其格式化到指定位置(大写E)
 f | 将整数,浮点数转换成浮点数表示,并将其格式化到指定位置(默认保留小数点后6位)
 F | 同上
 g | 自动调整将整数,浮点数转换成浮点型或科学计数法表示(超过6位数用科学计数法),并将其格式化到指定位置(如果是科学计数,则是e;)
 G | 自动调整将整数,浮点数转换成浮点型或科学计数法表示(超过6位数用科学计数法),并将其格式化到指定位置(如果是科学计数,则是E;)
 % | 当字符串中存在格式化标志时,需要用%%表示一个百分号

> 注:python百分号格式化是不存在自动将整数转换成二进制表示的方法

## 格式化实例

常用字符串格式化方式

```python
>>> string = "My name is : %s" % ("yang")
>>> string
'My name is : yang'
```

字符串中出现`%`的次数要与`%`之后所提供的数据项个数相同,如果需要插入多个数据,则需要将他们封装进一个元组

```python
>>> string = "My name is: %s ,I am %d years old" % ("yang",18)
>>> string
'My name is: yang ,I am 18 years old'
```

给参数起一个名字,后面传值得时候必须是一个字典

```python
>>> string = "My name is: %(name)s ,I am %(age)d years old" % {"name":"yang","age":18}
>>> string
'My name is: yang ,I am 18 years old'
```

去浮点数后面的位数

```python
>>> string = "percent %.2f" % 99.9121
>>> string
'percent 99.91'
```

给浮点数起一个名字(key)

```python
>>> string = "percent %(p).2f" % {"p":99.232}
>>> string
'percent 99.23'
```

两个百分号代表一个百分号

```python
>>> string = "percent %(p).2f%%" % {"p":99.232}
>>> string
'percent 99.23%'
```

## 使用{}和format的新格式化

    [[fill]align][sign][#][0][width][,][.precision][type]

**[fill]**

可选,空白处填充的字符

**align**

可选,对其方式(需配合width使用)

 参数 | 说明
 ---|---
 < | 强制内容左对齐
 > | 强制内容右对齐(默认)
 = | 强制内容右对齐,将符号放置在填充字符的左侧,且只对数字类型有效.即使:符号 + 填充物 + 将数字
 ^ | 强制内容居中

**[sign]**

可选,有无符号数字

 参数 | 说明
 ---|---
 + | 正号加正,负号加负
 - | 证号不变,负号加负
 space | 正号空格,负号加负

**[#]**

可选,对于二进制,八进制,十六进制,如果加上#,会显示0b/0o/0x,否则不显示

**[,]**

可选,为数字添加分隔符,如: 1,000,000

**[width]**

可选,格式化位所占宽度

**[.precision]**

可选,小数位保留精度

**[type]**

可选,格式化类型

传入"**字符串类型**"的参数

 参数 | 说明
 ---|---
 s | 格式化字符串类型数据
 空白 | 未指定类型,则默认是None,同s

 传入"**整数类型**"的参数

 参数 | 说明
 ---|---
 b | 将十进制整数自动转换成二进制表示然后格式化
 c | 将十进制整数自动转换成其对应Unicode字符
 d | 十进制整数
 o | 将十进制整数自动转换成8进制表示然后格式化
 x | 将十进制整数自动转换成十六进制表示然后格式化(小写x)
 X | 将十进制整数自动转换成十六进制表示然后格式化(大写X)

传入"**浮点型或小数类型**"的参数

 参数 | 说明
 ---|---
 e | 转换为科学计数法(小写e)表示,然后格式化
 E | 转换为科学计数法(大写E)表示,然后格式化
 f | 转换为浮点型(默认小数点后保留6位)表示,然后格式化
 F | 转换为浮点型(默认小数点后保留6位)表示,然后格式化
 g | 自动在e和f中切换
 G | 自动在e和f中切换
 % | 显示百分比(默认显示小数点后6位)

## format格式化实例

第一种基本format格式化方式

```python
>>> string = "My name is: {},I am {} years old, {} Engineer".format("yang",18,"python")
>>> string
'My name is: yang,I am 18 years old, python Engineer'
```

第二种基本format格式化方法

```python
>>> string = "My name is: {},I am {} years old, {} Engineer".format(*["yang",18,"python"])
>>> string
'My name is: yang,I am 18 years old, python Engineer'
```

给传入的参数加一个索引

```python
>>> string = "My name is:{0},I am {1} years old, {0} Engineer".format(*["yang",18,"python"])
>>> string
'My name is:yang,I am 18 years old, yang Engineer'
```

给参数起一个名字(key)

```python
>>> string = "My name is:{name},I am {age} years old, {job} Engineer".format(name="yang",age=18,job="python")
>>> string
'My name is:yang,I am 18 years old, python Engineer'
```

字典的方式

```python
>>> string = "My name is:{name},I am {age} years old, {job} Engineer".format(**{"name":"yang","age":18,"job":"python"})
>>> string
'My name is:yang,I am 18 years old, python Engineer'
```

索引内的索引

```python
>>> string = "My name is:{0[0]},I am {0[1]} years old, {0[2]} Engineer".format(["yang",18,"python"],["Ya",11,"IT"])
>>> string
'My name is:yang,I am 18 years old, python Engineer'
```

指定参数类型

```python
>>> string = "My name is:{:s},I am {:d} years old, {:f} wage".format("yang",18,32424.324)
>>> string
'My name is:yang,I am 18 years old, 32424.324000 wage'
```

指定名称(key)的值类型

```python
>>> string = "My name is: {name:s},I am {age:d} years old".format(name="yang",age=18)
>>> string
'My name is: yang,I am 18 years old'
```

异类实例

```python
>>> string = "numbers: {:b},{:o},{:d},{:x},{:X}, {:%}".format(15,15,15,15,15,15.87232,2)
>>> string
'numbers: 1111,17,15,f,F, 1587.232000%'
```

## 显示颜色

```shell
# 字体颜色
\033[30m 黑色字 \033[0m
\033[31m 红色字 \033[0m
\033[32m 绿色字 \033[0m
\033[33m 黄色字 \033[0m
\033[34m 蓝色字 \033[0m
\033[35m 紫色字 \033[0m
\033[36m 天篮字 \033[0m
\033[37m 白色字 \033[0m

# 底色
\033[40m  \033[0m
\033[41m  \033[0m
\033[42m  \033[0m
\033[43m  \033[0m
\033[44m  \033[0m
\033[45m  \033[0m
\033[46m  \033[0m
\033[47m  \033[0m

\033[40m 黑底色 \033[0m
\033[41m 红底色 \033[0m
\033[42m 绿底色 \033[0m
\033[43m 黄底色 \033[0m
\033[44m 蓝底色 \033[0m
\033[45m 紫底色 \033[0m
\033[46m 天篮底色 \033[0m
\033[47m 白底色 \033[0m

```